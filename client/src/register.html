<!DOCTYPE html>
<html>
<title>Sign Up</title>
<head>
    <link rel="stylesheet" type="text/css" href="./css/registerStyle.css">
</head>
<body>
    <form id="registerForm">
        <h1>Retro</h1>
        <h2>Sign Up</h2>
                <p>
                <label for="fullname" class="floatLabel">Full name</label>
                <input id="fullname" name="fullname" type="text">
                </p>
              <p>
                  <label for="email" class="floatLabel">Email</label>
                  <input id="email" name="email" type="text">
              </p>
              <p>
                  <label for="password" class="floatLabel">Password</label>
                  <input id="password" name="password" type="password">
              </p>
              <p class="errors" id="errors">
              <p><input type="submit" value="Create My Account" id="submit">
              </p>
              <div class="signUp">
                <span class="txt1">have an account? <a href="index.html" class="txt2"> Login</a></span>
              </div>
          </form>
          <script>
            var ans;
            var email;
            var password;
            const registerForm = document.getElementById('registerForm');
            registerForm.addEventListener('submit', function(e){
			e.preventDefault();
			let isValidInput = validateUserInput();
			if(isValidInput) {
			fetch(`http://localhost:5000/register?email=${email}&fullname=${fullname}&password=${password}`, {
				method: 'post',
			 }) .then(response => response.text())
				.then(result => ans=result)
				.then(()=> console.log(ans))
				.catch(error => console.log('error', error));
			}
        });
        
        function validateUserInput() {
            email = document.getElementById('email').value;
            fullname = document.getElementById('fullname').value;
            password = document.getElementById('password').value;
            document.getElementById("errors").innerHTML = "";

            let isValidName = (/^[a-zA-Z]+ [a-zA-Z]+$/).test(fullname)
			if(!isValidName) {
				document.getElementById("errors").innerHTML += "<br>Please enter your full name";
            }
            
			let isValidEmail = (/\S+@\S+\.\S+/).test(email)
			if(!isValidEmail) {
				document.getElementById("errors").innerHTML += "<br>Wrong email format";
            }
            
			let isValidPassword = password.length > 5;
			if(!isValidPassword){
				document.getElementById("errors").innerHTML += "<br>password must contains at list 6 characters";
			}

			return isValidEmail && isValidPassword;
		    }
          </script>
</body>
</html>